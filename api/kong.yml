_format_version: "1.1"

services:
  - name: catalog
    url: http://eShopCloudNative.Catalog.WebApi
    routes:
      - name: my-route
        paths:
          - /

plugins:
  # - name: proxy-cache
  #   service: catalog
  #   config:
  #     response_code:
  #       - 200
  #     request_method:
  #       - GET
  #       - HEAD
  #     content_type:
  #       - "text/plain"
  #       - "application/json; charset=utf-8"
  #       - "application/json"
  #     cache_ttl: 30
  #     strategy: memory

  - name: key-auth
    service: catalog
    config:
      hide_credentials: true
      key_names:
        - apikey

  # - name: http-log
  #   service: catalog
  #   config:
  #     http_endpoint: https://webhook.site/fcbd8eb6-b4b7-4f00-b0f0-130540c89756
  #     method: POST
  #     timeout: 1000
  #     keepalive: 1000
  #     flush_timeout: 2
  #     retry_count: 15

  # - name: file-log
  #   service: catalog
  #   config:
  #     path: /tmp/file.log

consumers:
  - username: catalog.web
    keyauth_credentials:
      - key: catalog-web-ba61c23c

  - username: catalog.api
    keyauth_credentials:
      - key: catalog-api-ba61c23c
